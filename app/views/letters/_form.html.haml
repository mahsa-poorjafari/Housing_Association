= form_for @letter do |f|
  - if @letter.errors.any?
    #error_explanation
      %h2= "#{pluralize(@letter.errors.count, "error")} prohibited this letter from being saved:"
      %ul
        - @letter.errors.full_messages.each do |msg|
          %li= msg

  .field
    =Letter::LetterTypes[@letter.letter_type.to_sym]
  .field
    = f.label :summary
    = f.text_field :summary
  .field
    = f.label :sent_date
    = f.text_field :sent_date
  .field
    = f.label :received_date
    = f.text_field :received_date
  .field
    = f.label :senderpreson_name
    = f.text_field :senderpreson_name, data: {autocomplete_source: preson_names_contacts_path}
  .field
    =f.label :recievers
    =f.text_field :reciever_tokens, data: {autocomplete_source: reciever_names_contacts_path, load: @letter.recievers.map{|c|{id:c.id, name:c.preson_name}}}
    =link_to "افزودن دریافت کننده جدید", new_contact_path, target:"_blank"
    /should be auto complete
  .field
    = f.label :content
    = f.text_area :content
  .field
    = f.label :attachment
    = f.text_field :attachment
  .actions
    = f.submit 'Save'
